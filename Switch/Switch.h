0000000: 2370 7261 676d 6120 6f6e 6365 0a0a 2369  #pragma once..#i
0000010: 6e63 6c75 6465 2022 7072 696d 6172 795f  nclude "primary_
0000020: 6865 6164 6572 2e68 220a 2369 6e63 6c75  header.h".#inclu
0000030: 6465 2022 5061 636b 6574 2e68 220a 0a23  de "Packet.h"..#
0000040: 6465 6669 6e65 2044 4553 5420 6669 7273  define DEST firs
0000050: 740a 2364 6566 696e 6520 504f 5254 2066  t.#define PORT f
0000060: 6972 7374 0a23 6465 6669 6e65 204c 454e  irst.#define LEN
0000070: 2073 6563 6f6e 640a 0a74 7970 6564 6566   second..typedef
0000080: 2070 6169 723c 7374 7275 6374 2073 6f63   pair<struct soc
0000090: 6b61 6464 725f 696e 2c20 696e 743e 2072  kaddr_in, int> r
00000a0: 6f75 7465 5f64 6174 613b 0a0a 0a63 6c61  oute_data;...cla
00000b0: 7373 2053 7769 7463 680a 7b0a 7075 626c  ss Switch.{.publ
00000c0: 6963 3a0a 2020 2020 5377 6974 6368 2869  ic:.    Switch(i
00000d0: 6e74 2070 6f72 7429 3b0a 2020 2020 7e53  nt port);.    ~S
00000e0: 7769 7463 6828 293b 0a0a 2020 2020 766f  witch();..    vo
00000f0: 6964 2063 6f6e 6e65 6374 2869 6e74 2070  id connect(int p
0000100: 6f72 7429 3b0a 2020 2020 766f 6964 2075  ort);.    void u
0000110: 7064 6174 655f 726f 7574 696e 675f 7461  pdate_routing_ta
0000120: 626c 6528 6164 6472 6573 7320 6465 7374  ble(address dest
0000130: 2c20 696e 7420 6c65 6e67 7468 2c20 696e  , int length, in
0000140: 7420 706f 7274 293b 0a20 2020 2076 6f69  t port);.    voi
0000150: 6420 7570 6461 7465 2850 6163 6b65 7420  d update(Packet 
0000160: 7029 3b0a 2020 2020 766f 6964 2070 6173  p);.    void pas
0000170: 735f 6461 7461 2850 6163 6b65 7420 7029  s_data(Packet p)
0000180: 3b0a 2020 2020 766f 6964 2061 6363 6570  ;.    void accep
0000190: 745f 636f 6e6e 6563 7469 6f6e 2850 6163  t_connection(Pac
00001a0: 6b65 7420 7029 3b0a 2020 2020 766f 6964  ket p);.    void
00001b0: 2073 6574 5f61 6464 7228 5061 636b 6574   set_addr(Packet
00001c0: 2070 2c20 7374 7275 6374 2073 6f63 6b61   p, struct socka
00001d0: 6464 725f 696e 2a20 6672 6f6d 293b 0a20  ddr_in* from);. 
00001e0: 2020 2076 6f69 6420 7061 7273 655f 7061     void parse_pa
00001f0: 636b 6574 2850 6163 6b65 7420 702c 2073  cket(Packet p, s
0000200: 7472 7563 7420 736f 636b 6164 6472 5f69  truct sockaddr_i
0000210: 6e2a 2066 726f 6d29 3b0a 2020 2020 766f  n* from);.    vo
0000220: 6964 2072 756e 2829 3b0a 2020 2020 0a70  id run();.    .p
0000230: 7269 7661 7465 3a0a 2020 2020 696e 7420  rivate:.    int 
0000240: 706f 7274 3b0a 2020 2020 696e 7420 736f  port;.    int so
0000250: 636b 3b0a 2020 2020 6d61 703c 6164 6472  ck;.    map<addr
0000260: 6573 732c 2070 6969 3e20 726f 7574 696e  ess, pii> routin
0000270: 675f 7461 626c 653b 200a 2020 2020 6d61  g_table; .    ma
0000280: 703c 6164 6472 6573 732c 2073 7472 7563  p<address, struc
0000290: 7420 736f 636b 6164 6472 5f69 6e2a 3e20  t sockaddr_in*> 
00002a0: 636f 6e6e 6563 7465 64d9 8063 6c69 656e  connected..clien
00002b0: 743b 200a 2020 2020 7665 6374 6f72 3c69  t; .    vector<i
00002c0: 6e74 3e20 636f 6e6e 6563 7465 64d9 8073  nt> connected..s
00002d0: 7769 7463 683b 0a7d 3b0a                 witch;.};.
